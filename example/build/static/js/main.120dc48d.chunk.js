(this["webpackJsonpreact-form-templator-example"]=this["webpackJsonpreact-form-templator-example"]||[]).push([[0],{10:function(e,n,t){"use strict";t.r(n);t(5);var r=t(0),a=t.n(r),u=t(2),o=t.n(u),i=t(3);function c(){return(c=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}var l={required:function(e,n,t){return!n&&e+" must have a value"},minLength:function(e,n,t){return n&&n.length<t&&e+" must be at least "+t+" characters"},maxLength:function(e,n,t){return n&&n.length>t&&e+" must not be more than "+t+" characters"},number:function(e,n,t){return isNaN(n)&&e+" must be a number"}},m=Object(r.memo)((function(e){var n=e.schema,t=e.onSubmit,u=e.dynamicProps,o=void 0===u?{}:u,i=e.formElement,m=Object(r.useState)({}),p=m[0],d=m[1],b=Object(r.useState)({}),v=b[0],h=b[1],y={values:p,errors:v,inputs:n.reduce((function(e,n){var t;return c({},e,((t={})[n.name]=Object(r.createRef)(),t))}),{}),setValue:function(e,n){var t;d(c({},p,((t={})[e]=n,t)))}};function g(e,n,t){var r=Object.keys(l).map((function(n){return e[n]&&l[n](e.label,p[e.name],e[n])})).filter((function(e){return e}));if(console.log(r),e.validator){var a=e.validator(e.label?e.label:e.name,p[e.name]);a&&r.push(a)}var u,o=r&&r.length>0&&r[0];n&&(t&&o&&y.inputs[e.name].current&&y.inputs[e.name].current.focus(),h(c({},v,((u={})[e.name]=o?""+o:void 0,u))));return{name:e.name,error:r&&r.length>0?r[0]:void 0}}function x(){var e=function e(n){var t=[];return n.forEach((function(n){n.name&&t.push(n),n.content&&t.push.apply(t,e(n.content))})),t}(n).map((function(e){return g(e)})).filter((function(e){return e.error})).reduce((function(e,n){var t;return c({},e,((t={})[n.name]=n.error,t))}),{});h(e);var r=Object.keys(e);r.length>0?y.inputs[r[0]].current.focus():t(p,h)}return a.a.cloneElement(i(x),{children:function e(n){return a.a.createElement(r.Fragment,null,n&&n.map((function(n,t){if(!s[n.type]&&!f[n.type])return console.error("react-form-templator: Element "+n.type+" has not been registered");if(n.content)return a.a.cloneElement(f[n.type](c({},n.content,{children:e(n.content)})));var r=n,u=c({tabIndex:t+1,error:v[r.name],ref:y.inputs[r.name]},o[r.name]?o[r.name]:{},{validate:function(e){return g(r,!0,e)},submit:x,onChange:function(e){var n;h(c({},v,((n={})[r.name]=void 0,n))),y.setValue(r.name,e)},value:p[r.name]});return a.a.cloneElement(s[r.type](c({},r,u)))})))}(n)})})),s={},f={};function p(e,n){if(f[e]||s[e])return console.error("Element type '"+e+"' is already registered");s[e]=n}function d(e){var n=e.schema,t=e.onSubmit,r=e.dynamicProps;return a.a.createElement(m,{onSubmit:t,dynamicProps:r,schema:n,formElement:function(e){return a.a.createElement("form",{onSubmit:function(n){n.preventDefault(),e()}})}})}p("text-input",(function(e){return a.a.createElement("div",null,e.label,a.a.createElement("input",{type:"text",name:e.name,tabIndex:e.tabIndex,ref:e.ref,onChange:function(n){return e.onChange(n.currentTarget.value)},onBlur:function(){return e.validate(!1)}}),e.error)})),p("submit",(function(e){return a.a.createElement("input",{type:"submit",value:e.isLoading?"loading":e.name})})),function(e,n){if(f[e]||s[e])return console.error("react-templator: Element type '"+e+"' is already registered");f[e]=n}("inline",(function(e){var n=e.children;return a.a.createElement("div",{style:{flex:1,backgroundColor:"blue",justifyContent:"space-between"}},n)}));var b=[{label:"hello",type:"text-input",name:"firstname",required:!0,minLength:5},{type:"inline",content:[{label:"another",type:"text-input",name:"lastname",required:!0},{label:"anotherxx",type:"text-input",name:"lastnamxxxe",required:!0}]},{label:"fuck",type:"text-input",name:"fuck",number:!0,required:!0},{label:"custom validator",type:"text-input",required:!0,name:"cusddtom",validator:function(e,n){return"vrondakis"!==n&&"".concat(e," must be vrondakis")}},{type:"submit",name:"shit"}],v=function(){var e=Object(r.useState)(!1),n=Object(i.a)(e,2),t=n[0],u=n[1];return a.a.createElement(a.a.Fragment,null,a.a.createElement(d,{schema:b,onSubmit:function(e,n){console.log("on submit",e),u(!0),setTimeout((function(){n({lastname:"CUNT"}),u(!1)}),2e3)},dynamicProps:{shit:{isLoading:t}}}))};o.a.render(a.a.createElement(v,null),document.getElementById("root"))},4:function(e,n,t){e.exports=t(10)},5:function(e,n,t){}},[[4,1,2]]]);
//# sourceMappingURL=main.120dc48d.chunk.js.map